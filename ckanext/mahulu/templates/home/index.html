{% extends 'page.html' %}
{% block title %}Home{% endblock %}

{% set groups = h.get_featured_groups(9999) %}
{% set top_organization = h.get_featured_organizations(5) %}
{% set stats = h.get_site_statistics() %}

{%- block content %}
<!-- Hero Section -->
<section class="relative w-full h-[28rem] flex items-center justify-center overflow-hidden">
  <img class="absolute inset-0 w-full h-full object-cover" src="/20230510_173816.jpg" alt="Mahakam Ulu landscape">
  <div class="absolute inset-0 bg-black/50"></div>

  <div class="relative z-10 max-w-6xl mx-auto px-4 flex items-center gap-8">
    <!-- Text & Search -->
    <div class="flex-1 text-white">
      <h1 class="text-4xl md:text-5xl font-bold leading-tight mb-4">
        Portal Data Terbuka Kabupaten Mahakam Ulu
      </h1>
      <p class="text-lg mb-6 opacity-90">
        Akses informasi publik secara cepat, akurat, dan transparan.
      </p>
    </div>
    <!-- Decorative Image -->
    <div class="hidden md:flex flex-1 justify-center">
      <img class="h-64 object-contain drop-shadow-lg" src="/g2048.png" alt="Open data illustration">
    </div>
  </div>
</section>

<!-- Latest Datasets -->
<section class=" mx-auto p-20 bg-gray-200">
  {{ h.snippet('home/snippets/horizontal_dataset_list.html', packages=h.mahulu_newset_dataset()) }}
</section>

<!-- Sorotan Tabs -->
<section class="max-w-6xl mx-auto px-4 py-16">
  {{ h.snippet('home/snippets/tab_dataset.html') }}
</section>

<!-- User Traffic -->
<section class="max-w-6xl mx-auto px-4 py-16">
  {{ h.snippet('home/snippets/user_traffic.html', user_traffic_data=(user_traffic_data or h.get_user_traffic_data())) }}
</section>

<!-- Topics -->
<section class="bg-gray-200 mx-auto px-20 py-20">
  <div class="text-center mb-12">
    <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-2">Telusuri Topik</h2>
    <p class="text-gray-600 max-w-2xl mx-auto">Pilih kategori yang sesuai untuk menemukan dataset yang Anda butuhkan.</p>
  </div>
  <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-6">
    {% for item in groups %}
      <a href="{{ h.url_for(item.type ~ '.read', id=item.name) }}" class="group block text-center">
        <div class="relative overflow-hidden rounded-2xl shadow-sm group-hover:shadow-md transition-all duration-300" style="aspect-ratio: 1/1;">
          <img class="absolute inset-0 w-full h-full object-cover group-hover:scale-[1.03] transition-transform duration-300"
               src="{{ item.image_display_url or '/images/placeholder-group.png' }}"
               alt="{{ item.title }}">
        </div>
        <span class="mt-3 block text-sm font-medium text-gray-800 group-hover:text-indigo-600">{{ item.title }}</span>
      </a>
    {% endfor %}
  </div>
</section>

<section class="bg-gray-200 mx-auto px-20 py-20">
  {{ h.snippet('home/snippets/faq.html') }}
</section>

<!-- Latest Datasets -->
<!-- <section class="max-w-6xl mx-auto px-4 pb-20">
  <div class="text-center mb-12">
    <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-2">Dataset Terbaru</h2>
    <p class="text-gray-600 max-w-2xl mx-auto">Temukan dataset paling mutakhir dari berbagai organisasi.</p>
  </div>
  <div class="bg-white rounded-2xl border border-gray-200 shadow-lg md:flex">
    <aside class="md:w-1/3 p-6 border-b md:border-b-0 md:border-r border-gray-200">
      <h3 class="text-base font-semibold text-gray-900 mb-4">Filter</h3>
      {% for facet in facet_titles %}
        {{ h.snippet('snippets/facet_list.html',
                      title=facet_titles[facet],
                      name=facet,
                      search_facets=search_facets) }}
      {% endfor %}
    </aside>
    <div class="md:w-2/3 p-6">
      {% block form %}
        {% set facets = {
          'fields': fields_grouped,
          'search': search_facets,
          'titles': facet_titles,
          'translated_fields': translated_fields,
          'remove_field': remove_field
        } %}
        {% set sorting = [
          (_('Relevance'), 'score desc, metadata_modified desc'),
          (_('Name Ascending'), 'title_string asc'),
          (_('Name Descending'), 'title_string desc'),
          (_('Last Modified'), 'metadata_modified desc'),
          (_('Popular'), 'views_recent desc') if g.tracking_enabled else (false, false)
        ] %}
      {% endblock %}
      {{ h.snippet('snippets/package_list_rdev.html',
                   packages=h.mahulu_newset_dataset()) }}
    </div>
  </div>
</section> -->
{% endblock -%}
